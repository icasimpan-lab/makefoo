srcdir = @srcdir@
top_srcdir = @top_srcdir@
top_builddir = .

MAKEFOO=@MAKEFOO@
CC=@CC@
CXX=@CXX@

# components
libfoo_DIR = libfoo
libbar_DIR = libbar
baz_DIR    = baz

# libbaz definiions (should be in libfoo/component_defs.mk)
libfoo_SOURCES = foo.cpp spam.c
libfoo_NAME    = foo

SHARED_LIBRARIES += libfoo
STATIC_LIBRARIES += libfoo

# libbar definiions (should be in libbar/component_defs.mk)
libbar_SOURCES = bar.cpp bar_ex.cpp
libbar_NAME    = bar2
STATIC_LIBRARIES += libbar

libbar_TEST_SOURCES = bar_test.cpp
libbar_test_program_LINK_DEPS = libbar libfoo

#libbar_unittests_SOURCES   = bar_test.cpp
#libbar_unittests_DIR       = libbar
#libbar_unittests_LINK_DEPS = bar2
#libbar_unittests_TESTED_COMPONENT = libbar

#PROGRAMS      += libbar_unittests
#TEST_PROGRAMS += libbar_unittests

# baz program definiions (should be in baz/component_defs.mk)
baz_NAME    = baz
baz_SOURCES = baz.cpp
baz_DEPS    = libbar libfoo

PROGRAMS += baz

# locate makefoo components
# in production it should look like this
#MAKEFOO=$(top_srcdir)/makefoo
# but in tests we're testing current source tree
#MAKEFOO=$(top_srcdir)/../../
ddd_COMPONENTS=baz libbar
PACKAGES=ddd libfoo

MAKEFOO_USE += native
MAKEFOO_USE += test-program
MAKEFOO_USE += install-fhs
MAKEFOO_USE += rpm
MAKEFOO_USE += autoconf
MAKEFOO_USE += src-dist

include $(MAKEFOO)

# jedit: :tabSize=8:mode=makefile:

